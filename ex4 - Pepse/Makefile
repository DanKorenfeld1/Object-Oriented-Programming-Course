ROOT_SOURCES_DIRECTORY := src
ALL_FILES := $(shell cd $(ROOT_SOURCES_DIRECTORY) && find . -type f -printf '%P\n')
FILES_NOT_TO_SUBMIT := 
FILES_TO_SUBMIT := $(filter-out $(FILES_NOT_TO_SUBMIT),$(ALL_FILES))
EXCERSICE_NUMBER := 4
SUBMISSION_FILE := ex$(EXCERSICE_NUMBER).tar
SUBMISSION_FILE_ZIP := ${SUBMISSION_FILE:.tar=.zip}

.PHONY: clean tar zip

clean:
	rm -rf $(SUBMISSION_FILE) $(SUBMISSION_FILE_ZIP)

tar:
	cd $(ROOT_SOURCES_DIRECTORY) && tar -cf $(SUBMISSION_FILE) $(FILES_TO_SUBMIT)
	mv $(ROOT_SOURCES_DIRECTORY)/$(SUBMISSION_FILE) $(SUBMISSION_FILE)

zip:
	cd $(ROOT_SOURCES_DIRECTORY) && zip -r $(SUBMISSION_FILE_ZIP) $(FILES_TO_SUBMIT)
	mv $(ROOT_SOURCES_DIRECTORY)/$(SUBMISSION_FILE_ZIP) $(SUBMISSION_FILE_ZIP)

